{
  "hash": "caec760f55c0fb2503d83a47a929ef23",
  "result": {
    "markdown": "---\ntitle: \"No wells\"\nformat:\n  html:\n    code-fold: true\n---\n\n## Flowrate/Pressure peaks\n\nAfter excluding rows that entered the two phase region, there are two cases where the greatest outlet pressure for an inlet pressure was not at a flowrate of 1 kgps. \n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom matplotlib.lines import Line2D\n\ndf = pd.read_csv(\"./dt/solver-out-2023-04-13_151111322_(temp=10C, inc=1).txt\")\ndf = df.loc[df[\"FluidPressureAtReservoirBara\"] > 0.01]\nnoTwoPhase = df.loc[df[\"WasTwoPhase\"] == False]\n\ngrouped = noTwoPhase.groupby(\"InletPressureBara\")\nmaxFR = noTwoPhase.loc[\n    noTwoPhase.groupby(\"InletPressureBara\")[\"FluidPressureAtReservoirBara\"].idxmax()\n]\nmaxFR.loc[maxFR[\"InletFlowrateKgps\"] > 1]\n```\n\n::: {.cell-output .cell-output-display execution_count=27}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>InletPressureBara</th>\n      <th>InletFlowrateKgps</th>\n      <th>InletTemperatureCelsius</th>\n      <th>ReservoirPressureBara</th>\n      <th>WasTwoPhase</th>\n      <th>WasLiquid</th>\n      <th>FluidPressureAtReservoirBara</th>\n      <th>FluidTemperatureAtReservoirCelsius</th>\n      <th>FluidPhaseAtReservoir</th>\n      <th>PressureStatus</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>9501</th>\n      <td>69</td>\n      <td>3</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>68.873411</td>\n      <td>9.826676</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n    <tr>\n      <th>8446</th>\n      <td>77</td>\n      <td>2</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>76.904508</td>\n      <td>10.159886</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\ncolors = {False: \"tab:blue\", True: \"tab:orange\"}\n\n\ndef draw_plot(df_plot, pressureBara, temperatureCelsius):\n    df_plot = df_plot.dropna()\n    df_plot = df_plot[(df_plot[\"InletPressureBara\"] == pressureBara)]\n    fig = plt.figure()\n    ax = fig.add_subplot()\n    ax.scatter(\n        df_plot[\"InletFlowrateKgps\"],\n        df_plot[\"FluidPressureAtReservoirBara\"],\n        c=df_plot[\"WasTwoPhase\"].map(colors),\n    )\n    ax.set_xlabel(\"Inlet flowrate\")\n    ax.set_ylabel(\"Outlet pressure\")\n\n    handles = [\n        Line2D(\n            [0], [0], marker=\"o\", color=\"w\", markerfacecolor=v, label=k, markersize=8\n        )\n        for k, v in colors.items()\n    ]\n    ax.legend(\n        title=\"WasTwoPhase\", handles=handles, bbox_to_anchor=(1.05, 1), loc=\"upper left\"\n    )\n    plt.grid()\n    plt.show()\n\n```\n:::\n\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\ndraw_plot(df, 69, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 69 Bara, 10°C](index_files/figure-html/fig-nw69bara-output-1.png){#fig-nw69bara width=720 height=429}\n:::\n:::\n\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\ndraw_plot(df, 77, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 77 Bara, 10°C](index_files/figure-html/fig-nw77bara-output-1.png){#fig-nw77bara width=720 height=429}\n:::\n:::\n\n\n## Two phase and discontinuities\n\nThere is often, but not always, an outlet pressure discontinuity in cases that have entered the two phase region at or before the final pipe segment.\n\n\nIn @fig-nw80bara, the discontinuity is early in the set of cases that entered two phase.\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\ndraw_plot(df, 80, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 80 Bara, 10°C](index_files/figure-html/fig-nw80bara-output-1.png){#fig-nw80bara width=720 height=429}\n:::\n:::\n\n\nDespite entering two phase, there was no discontinuity in @fig-nw45bara. It doesn't seem to be the case that *just* entering the two phase region will cause a discontinuity. It could be related to where it happens, from which direction, or what pressure it happens at.\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\ndraw_plot(df, 45, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 45 Bara, 10°C](index_files/figure-html/fig-nw45bara-output-1.png){#fig-nw45bara width=720 height=429}\n:::\n:::\n\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\ndraw_plot(df, 40, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 40 Bara, 10°C](index_files/figure-html/fig-nw40bara-output-1.png){#fig-nw40bara width=720 height=429}\n:::\n:::\n\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\ndraw_plot(df, 72, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 72 Bara, 10°C](index_files/figure-html/fig-nw72bara-output-1.png){#fig-nw72bara width=720 height=429}\n:::\n:::\n\n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\ndraw_plot(df, 71, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 71 Bara, 10°C](index_files/figure-html/fig-nw71bara-output-1.png){#fig-nw71bara width=720 height=429}\n:::\n:::\n\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\ndraw_plot(df, 70, 10)\n```\n\n::: {.cell-output .cell-output-display}\n![No well - 70 Bara, 10°C](index_files/figure-html/fig-nw70bara-output-1.png){#fig-nw70bara width=720 height=429}\n:::\n:::\n\n\n# [Data](dt/solver-out-2023-04-13_151111322_(temp=10C, inc=1).txt)\n\n::: {.cell execution_count=11}\n``` {.python .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-display execution_count=37}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>InletPressureBara</th>\n      <th>InletFlowrateKgps</th>\n      <th>InletTemperatureCelsius</th>\n      <th>ReservoirPressureBara</th>\n      <th>WasTwoPhase</th>\n      <th>WasLiquid</th>\n      <th>FluidPressureAtReservoirBara</th>\n      <th>FluidTemperatureAtReservoirCelsius</th>\n      <th>FluidPhaseAtReservoir</th>\n      <th>PressureStatus</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>140</td>\n      <td>132</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>88.854647</td>\n      <td>6.548960</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>140</td>\n      <td>131</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>89.481044</td>\n      <td>6.567070</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>140</td>\n      <td>130</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>90.101845</td>\n      <td>6.684956</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>140</td>\n      <td>129</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>90.724649</td>\n      <td>6.747347</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>140</td>\n      <td>128</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>True</td>\n      <td>91.347769</td>\n      <td>6.637653</td>\n      <td>Liquid</td>\n      <td>High</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>17951</th>\n      <td>5</td>\n      <td>1</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>False</td>\n      <td>4.743071</td>\n      <td>9.856658</td>\n      <td>Gas</td>\n      <td>Low</td>\n    </tr>\n    <tr>\n      <th>18082</th>\n      <td>4</td>\n      <td>2</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>False</td>\n      <td>2.574622</td>\n      <td>9.226031</td>\n      <td>Gas</td>\n      <td>Low</td>\n    </tr>\n    <tr>\n      <th>18083</th>\n      <td>4</td>\n      <td>1</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>False</td>\n      <td>3.672233</td>\n      <td>9.735752</td>\n      <td>Gas</td>\n      <td>Low</td>\n    </tr>\n    <tr>\n      <th>18215</th>\n      <td>3</td>\n      <td>1</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>False</td>\n      <td>2.544230</td>\n      <td>9.766071</td>\n      <td>Gas</td>\n      <td>Low</td>\n    </tr>\n    <tr>\n      <th>18347</th>\n      <td>2</td>\n      <td>1</td>\n      <td>10</td>\n      <td>40</td>\n      <td>False</td>\n      <td>False</td>\n      <td>1.207896</td>\n      <td>9.627365</td>\n      <td>Gas</td>\n      <td>Low</td>\n    </tr>\n  </tbody>\n</table>\n<p>10326 rows × 10 columns</p>\n</div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}